
# === Общие принципы ===

- Проект: React + Vite + TypeScript + CSS Modules.

- Все цвета и дизайн-токены объявляем только через CSS-переменные в :root (src/styles/variables.css). Никаких хардкод-цветов в компонентах.

- **Статичные данные и константы** (тексты, статусы, маппинги, ключи, размеры и т.п.) **нельзя держать внутри JSX**:

  - если используются только в одном компоненте — выносим в локальный файл `constants.ts` рядом с компонентом;

  - если переиспользуются несколькими компонентами — выносим в общий слой (`src/constants`, `src/lib/constants`, `src/types/enums` и т.п.).

- Каждый UI-компонент в отдельной папке внутри src/components:

  - `<Name>.tsx` — вёрстка/TSX;

  - `<Name>.module.css` — стили;

  - `hooks/` — локальные кастомные хуки;

  - `lib/` — локальные утилиты;

  - `types.ts` — локальные типы;

  - `constants.ts` — локальные константы;

  - `index.ts` — реэкспорт публичного API.

- Если логика, типы, утилиты или константы используются только этим компонентом — держим локально. Если переиспользуются — переносим в общие слои (`src/hooks`, `src/lib`, `src/types`, `src/constants`, `src/api`, `src/store`, `shared`).

- Папка src/components делится на:

  - `src/components/shared` — простые переиспользуемые компоненты без бизнес-логики (inputs, switches и т.п.);

  - `src/components/blocks` — составные UI-блоки из shared-компонентов (карточки, панели, формы). Без бизнес-логики.

- Страницы — в `src/pages`. Страница = композиция блоков + минимум glue-кода.

- Общие слои: `src/hooks`, `src/lib`, `src/types`, `src/api`, `src/store`, `src/styles`, `src/constants`.

- Имена:

  - PascalCase — для компонентов (`MyCard.tsx`);

  - camelCase — для хуков и утилит (`useThing.ts`, `formatMoney.ts`);

  - CSS-модули: `<Name>.module.css`; классы — kebab-case (`.root`, `.header`).

- Никаких inline-стилей и styled-components — только module.css.

- Ассеты — только локальные из `src/assets` (SVG, PNG и т.п.). Никаких CDN.

- **Импорты внутри проекта — только через алиасы**:

  - `@` → `src/`

  - `@/assets` → `src/assets/`

  - `@/components` → `src/components/`

  - `@/pages` → `src/pages/`

  - `@/styles` → `src/styles/`

  - и т.д.  

  Алиасы должны быть настроены в `vite.config.ts` и `tsconfig.json`.

  

---

  

# === API / HTTP ===

- Все сетевые вызовы идут ТОЛЬКО через единый Axios-инстанс: `src/api/httpClient.ts`.

- Никаких прямых fetch/axios в компонентах. Компонент ↔ (hook TanStack Query) ↔ сервис из `src/api` ↔ `httpClient`.

- Структура API:

  - `src/api/httpClient.ts` — базовый Axios instance (база URL, интерсепторы, ретраи);

  - `src/api/<domain>.ts` — функции для домена (`users.ts`, `auth.ts` и т.п.), которые используют `httpClient`;

  - опционально: `src/api/transformers/…` для маппинга ответов.

- Обработка ошибок/рефреш токена — в интерсепторах `httpClient`; хэндлеры ошибок можно реэкспортить из `src/api/errors.ts`.

  

---

  

# === Data fetching / кэш ===

- Для серверных данных используем **TanStack Query** (queries/mutations).

- В компонентах используем только **кастомные хуки** вида `useUsersQuery` / `useUpdateUserMutation`, объявленные в `src/hooks/queries` или рядом с фичей.

- Ключи запросов объявлять **константами** (`src/hooks/queries/keys.ts`) и переиспользовать.

- Инвалидация/рефетч — через `QueryClient`. Никаких ручных кэшей.

  

---

  

# === State management ===

- Глобальное состояние — **Redux Toolkit** (`src/store`).

- Redux используется для UI-состояний, auth-статуса, фичевых флагов и т.п.

- **Запрещено** хранить в Redux серверный кэш, покрытый TanStack Query.

- Структура:

  - `src/store/index.ts` — создание store, middleware;

  - `src/store/slices/<feature>Slice.ts` — слайсы;

  - селекторы — рядом с слайсом или в `src/store/selectors`.

  

---

  

# === Генерация компонента ===

- Создаём:

  - `src/components/<layer>/<Name>/`

    - `<Name>.tsx`

    - `<Name>.module.css`

    - `index.ts`

    - (опционально) `hooks/`, `lib/`, `types.ts`, `constants.ts`

- Компонент принимает типизированные props, поддерживает `className`, доступность (`aria-*`).

- Стили используют только `var(--token)`.

  

---

  

# === Страницы ===

- Каждая страница — в отдельной папке: `src/pages/<Page>/`.

- Внутренняя структура:

  - `<Page>.tsx`

  - `<Page>.module.css`

  - `index.ts`

  - (опционально) `hooks/`, `lib/`, `types.ts`, `components/`

- Страница = композиция блоков + минимум логики.

- Запросы данных — только через кастомные хуки (TanStack Query / Redux).

- Если логика/типы/утилиты/константы начинают переиспользоваться — переносим в общий слой (`src/hooks`, `src/lib`, `src/types`, `src/constants`, `src/components`).

- Импорт страницы для маршрутизации — из `src/pages/<Page>` (через `index.ts`), по возможности `lazy()` + `Suspense`.

  

---

  

# === Качество ===

- Типы для всех публичных API компонентов.

- Публичный экспорт — только через `index.ts`.

- Доступность: aria-атрибуты, label для инпутов, корректные роли.

  

---

  

# === CSS-переменные и стили ===

- Все дизайн-токены и цвета объявляются в `src/styles/variables.css`.

- Глобальные сбросы и базовые стили — в `src/styles/globals.css`.

- Подключать `variables.css` и `globals.css` в `src/main.tsx`.

- Использовать только `var(--color-*)`, `var(--space-*)`, `var(--radius-*)`, `var(--shadow-*)` и т.п.

  

---

  

# === Assets из Figma (иконки/изображения) ===

- Если во фрейме Figma есть иконки/изображения — скачиваем локально.

- SVG → `src/assets/icons`, PNG/JPG/WebP → `src/assets/images`.

- Имена файлов — kebab-case, латиница, без пробелов/спецсимволов.

- Абсолютные пути — только при скачивании; **в коде импортировать через алиас `@/`**:

  - пример: `import ClockRing from "@/assets/icons/clock-ring.svg";`

- НЕЛЬЗЯ вставлять CDN/HTTP-ссылки.

- SVG по умолчанию импортируем как файл; при необходимости — через SVGR.

- Если ассет уже существует — не перезаписывать; переиспользовать.

  

---

  

# === Политика путей для ассетов ===

- В JSX/TSX импорт ассетов ТОЛЬКО через алиас `@/`:

  - ИКОНКИ: `"@/assets/icons/<name>.svg|png"`

  - ИЗОБРАЖЕНИЯ: `"@/assets/images/<name>.png|jpg|webp|svg"`

- В CSS-модулях `url()` использовать относительный путь или алиас `@/`:

  - `background-image: url("@/assets/images/hero-bg.webp");`

  

---

  

# === Переиспользование vs Создание компонентов ===

- Перед созданием нового компонента Cursor обязан проверить наличие подходящего:

  1) По названию, роли и публичному API (props);

  2) В `src/components/shared`, `src/components/blocks` и внутри текущей фичи.

- Если найден — **переиспользовать**, дубли запрещены.

- Если частично подходит — расширить без лома обратной совместимости или вынести общее в `shared`.

- Любой новый компонент должен иметь структуру:

  - `.tsx` + `.module.css` + (опционально) `hooks/`, `lib/`, `types.ts`, `constants.ts` + `index.ts`.

  

---

  

# === Проверка перед генерацией ===

- Do/Check list:

  - **[Constants]** Все статичные данные вынесены в `constants.ts` (локально или в `src/constants`).

  - **[Assets]** Проверить, какие ассеты присутствуют во фрейме Figma → скачать отсутствующие → не перезаписывать существующие.

  - **[Paths]** Все импорты внутри проекта используют алиас `@/…`, нет относительных путей.

  - **[Reuse]** Проверить реюз существующих компонентов.

  - **[Structure]** Новый компонент/страница созданы в правильном слое с нужной структурой.